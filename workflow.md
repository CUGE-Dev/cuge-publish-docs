# 用户文档写作流程

## 1. 安装本地文档预览依赖

终端输入

```shell
npm i docsify-cli -g
```

确认

```shell
docsify --help
```

能正常输出帮助信息。

## 2. 克隆本仓库

这个不多说。

## 3. 在对应的目录下写作

| 平台                     | 对应文件夹   |
| ------------------------ | ------------ |
| 服务端                   | `server`     |
| 客户端                   | `client`     |
| 管理后台                 | `management` |
| 杂项(比如说这个规范文档) | 根目录       |

需要特别注意的是图片引用的插入方式,由于`docsify`使用`hash route`，导致浏览器使用`#`前的URL作为根来计算相对路径，因此插入图片时必须使用从根文件夹出发的相对路径引用才能在网页上正常显示。具体可以参考引用了图片的文档：[短信转发服务](./server/messenger.md)。

> 这可能会导致一些Markdown编辑器无法在编辑界面正常预览图片。这是因为绝大多数的Markdown编辑器均使用当前正在编辑的Markdown文件作为参考来解析文件中引用的所有相对路径。实际写作中只需要保证本地验证环节浏览器能正常显示图片即可。

## 4. 添加侧边栏

编辑 `_sidebar.md`文件，在对应分栏下添加文档引用，具体格式可以参考现存的`_sidebar.md`文件。

## 5. 本地验证

在文档根目录下执行

```shell
docsify serve .
```

本地预览看看文档是否正常。

## 6. 发布

推送工作分支，稍等片刻，刷新地址 https://cuge-dev.github.io/cuge-publish-docs/ ，预览发布到托管平台的文档是否正常。